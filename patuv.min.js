var APP_ID="",userData;window.onload=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&200===this.status&&(userData=JSON.parse(this.responseText.slice("userInfoCallBack".length+1,this.responseText.length-1)))},e.open("GET","http://www.geoplugin.net/json.gp?jsoncallback=userInfoCallBack",!0),e.send()}(function(e,r){"function"==typeof define&&define.amd?define(function(){return r(e)}):r(e)}(this,function(window){var Patuv=function(){};return Patuv.prototype={inited:!1,report:{APP_ID:!0,url:!0,errorText:!0,errorName:!0,errorStack:!0,lineNumber:!0,columnNumber:!0,userAgent:!0,browser:!0,os:!0,mobile:!0,userCountry:!0,userIpAddress:!0,userCity:!0},consoleText:"%cP%catuv %ccatched %cError%c! Report was sent!",consoleArgs:["color:#A2CFE8;font-size: 14px;font-weight: bold;","color:#088EC7;font-size: 14px;font-weight: bold;","font-weight:bold;color: #515151;font-size: 12px;","color: red;font-weight: bold;font-size: 14px;","font-weight:bold;color: #515151;font-size: 12px;"],method:"POST",applyConfig:function(e){if(e.url="https://api.patuv.ir/NewJsIssue",e.report)for(var r in e)this.report[r]=e.report[r];for(var r in e)"report"!==r&&(this[r]=e[r])},init:function(e){if(!e)throw new Error("please fill APP_ID for patuv");APP_ID=e.APP_ID||e.app_id;this.inited||(this.applyConfig(e||{}),this.initOnError(),this.inited=!0)},initOnError:function(){var e=this,r=window.onerror;e.getUserInfo(),window.onerror=function(o,s,t,n,a){r&&r.apply(window,[o,s,t,n,a]),a=a||{},window.console&&console.log&&e.consoleText&&(e.isIE?(e.consoleText=e.consoleText.replace(/\%c/g,""),console.log(e.consoleText)):console.log.apply(window,[].concat(e.consoleText).concat(e.consoleArgs)));var i={},c=e.report;if(i=e.getBaseReport(),c.url&&(i.url=location.href),c.errorText&&(i.errorText=o),c.errorName&&(i.errorName=a.name),c.errorMessage&&(i.errorMessage=a.message),c.errorStack&&(i.errorStack=a.stack),c.lineNumber&&(i.lineNumber=t),c.columnNumber&&(i.columnNumber=n),userData&&(i.userCountry=userData.geoplugin_countryName,i.userIpAddress=userData.geoplugin_request,i.userCity=userData.geoplugin_city),i.APP_ID=APP_ID,e.params)for(let r in e.params)i[r]=e.params[r];window.$&&$.ajax?$.ajax({type:e.method,url:e.url,data:i}):e.ajax({method:e.method,url:e.url,params:i})}},ajax:function(oParams){var sUrl=oParams.url,method=oParams.method,params=oParams.params||{},sData="",bAsync=!0,p,type=oParams.type||"json",headers=oParams.headers||{};for(p in""==sData.replace(/\&/g,"")&&(sData=""),params)sData+=p+"="+params[p]+"&";sData=sData.substring(0,sData.length-1);var oBeforeSend=oParams.beforeSend||null,oErrorCallback=oParams.failure||null,oSuccessCallback=oParams.success||null,oXhr=null;try{window.ActiveXObject?oXhr=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(oXhr=new XMLHttpRequest)}catch(e){}var bLocal="file:"==window.location.protocol;if(oXhr){var rsc=function(){if(4==oXhr.readyState){if((bLocal||oXhr.status>=200&&oXhr.status<300)&&oSuccessCallback)switch(type){case"json":oSuccessCallback(eval("("+oXhr.responseText+")"),oXhr.status,oXhr,sUrl);break;case"html":case"text":oSuccessCallback(oXhr.responseText,oXhr.status,oXhr,sUrl);break;default:throw new Error("this type is not set")}oXhr.status>=400&&oErrorCallback&&oErrorCallback(oXhr,oXhr.status,oXhr.statusText,sUrl),oXhr.onreadystatechange=new window.Function,oXhr=null}};oXhr.onreadystatechange=rsc,window.ActiveXObject||(oXhr.onerror=function(){oErrorCallback&&oErrorCallback(oXhr,0,"",sUrl)});var method=method.toUpperCase();if("GET"===method)""!=sData&&(-1==sUrl.indexOf("?")&&(sUrl+="?"),sUrl+=sData),oXhr.open("GET",sUrl,!0);else for(var p in oXhr.open(method,sUrl,!0),oXhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),oXhr.setRequestHeader("content-type","application/json"),headers)oXhr.setRequestHeader(p,headers[p]);oBeforeSend&&oBeforeSend(oXhr);try{if(oXhr.send(JSON.stringify(oParams.params)),!bAsync&&oSuccessCallback)switch(type){case"json":oSuccessCallback(eval("("+oXhr.responseText+")"),oXhr.status,oXhr,sUrl);break;case"html":case"text":oSuccessCallback(oXhr.responseText,oXhr.status,oXhr,sUrl);break;default:throw new Error("this type is not set")}}catch(e){bLocal&&oErrorCallback&&(oErrorCallback(oXhr,oXhr.status,oXhr.statusText,sUrl),oXhr.onreadystatechange=new window.Function,oXhr=null)}}},track:function(e){var r=this,o=r.getBaseReport();o.errorText=e,window.$&&$.ajax?$.ajax({type:r.method,url:r.url,data:o}):r.ajax({method:r.method,url:r.url,params:o})},getUserInfo:function(){var e,r,o,s=this,t=navigator.appVersion,n=navigator.userAgent,a=navigator.appName,i=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10);-1!=(r=n.indexOf("Opera"))&&(a="Opera",i=n.substring(r+6),-1!=(r=n.indexOf("Version"))&&(i=n.substring(r+8))),-1!=(r=n.indexOf("OPR"))?(a="Opera",i=n.substring(r+4)):-1!=(r=n.indexOf("Edge"))?(a="Microsoft Edge",i=n.substring(r+5)):-1!=(r=n.indexOf("MSIE"))?(a="Microsoft Internet Explorer",i=n.substring(r+5)):-1!=(r=n.indexOf("Chrome"))?(a="Chrome",i=n.substring(r+7)):-1!=(r=n.indexOf("Safari"))?(a="Safari",i=n.substring(r+7),-1!=(r=n.indexOf("Version"))&&(i=n.substring(r+8))):-1!=(r=n.indexOf("Firefox"))?(a="Firefox",i=n.substring(r+8)):-1!=n.indexOf("Trident/")?(a="Microsoft Internet Explorer",i=n.substring(n.indexOf("rv:")+3)):(e=n.lastIndexOf(" ")+1)<(r=n.lastIndexOf("/"))&&(a=n.substring(e,r),i=n.substring(r+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(o=i.indexOf(";"))&&(i=i.substring(0,o)),-1!=(o=i.indexOf(" "))&&(i=i.substring(0,o)),-1!=(o=i.indexOf(")"))&&(i=i.substring(0,o)),c=parseInt(""+i,10),isNaN(c)&&(i=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10));var l=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(t),d=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||d||(document.cookie="testcookie",d=-1!=document.cookie.indexOf("testcookie"));var u="Unknown",p=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var h in p){var w=p[h];if(w.r.test(n)){u=w.s;break}}var f="Unknown";switch(/Windows/.test(u)&&(f=/Windows (.*)/.exec(u)[1],u="Windows"),u){case"Mac OS X":f=/Mac OS X (10[\.\_\d]+)/.exec(n)[1];break;case"Android":f=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":f=(f=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+f[2]+"."+(0|f[3])}s.isIE=/Microsoft/.test(a)||/Internet/.test(a)||/Explorer/.test(a),s.userAgent=navigator.userAgent,s.os=u+" "+f,s.browser=a+" "+c,s.mobile=l},getBaseReport:function(){var e=this,r=e.report,o={};return r.url&&(o.userAgent=e.userAgent),r.url&&(o.url=location.href),r.os&&(o.os=e.os),r.browser&&(o.browser=e.browser),r.mobile&&(o.mobile=e.mobile),o}},Patuv=new Patuv,window.Patuv=Patuv,Patuv}));